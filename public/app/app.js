// Generated by CoffeeScript 1.8.0
(function() {
  define(function(require, exports, module) {
    var Analytics, App, FilterCriteriaModel, Layout, Marionette, Utils;
    Marionette = require('marionette');
    Layout = require('views/layout');
    Utils = require('helpers/utils');
    FilterCriteriaModel = require('entities/criteria');
    Analytics = require('entities/analytics');
    App = new Marionette.Application();
    App.layout = new Layout();
    App.utils = new Utils();
    App.filterCriteria = new FilterCriteriaModel();
    App.analytics = new Analytics();
    App.el = '#app-main';

    /** update App flow
         *  @param {string} create, update, cancel, detail
     */
    App.flow = null;

    /**
       *
       * @returns {Backbone.History.fragment|*}
     */
    App.getCurrentRoute = function() {
      return Backbone.history.fragment;
    };

    /**
       * @param route
       * @param {object} options
     */
    App.navigate = function(route, options) {
      if (options == null) {
        options = {};
      }
      return Backbone.history.navigate(route, options);
    };
    App.on('initialize:after', function() {
      if (_.isEmpty(App.scheduleCriteria.trainers)) {
        window.location.href = '/personal-training/schedule-equifit';
        return false;
      }
      window.App = {
        Components: {}
      };
      App.filterCriteria.set({
        sessionTypeId: App.scheduleCriteria.durations[0].sessionTypeId,
        duration: App.scheduleCriteria.durations[0].duration,
        trainerId: App.scheduleCriteria.trainers[0].trainerId,
        trainerName: App.scheduleCriteria.trainers[0].trainerFirstName + ' ' + App.scheduleCriteria.trainers[0].trainerLastName
      }, {
        silent: true
      });
      App.analytics.set({
        trainerId: App.scheduleCriteria.trainers[0].trainerId
      });
      App.addRegions({
        mainRegion: App.el
      });
      return App.mainRegion.show(App.layout);
    });
    module.exports = App;
  });

}).call(this);

//# sourceMappingURL=app.js.map
