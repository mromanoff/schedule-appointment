// Generated by CoffeeScript 1.8.0

/**
 * @module entities/appointments
 */

(function() {
  define(function(require) {
    var API, App, Appointments, DayPart, Loading, loadingView, msgBus;
    App = require('app');
    msgBus = require('msgbus');
    Loading = require('views/spinner');
    loadingView = new Loading();
    DayPart = Backbone.Model.extend({
      defaults: {
        morning: null,
        afternoon: null,
        evening: null
      }
    });
    Appointments = Backbone.Collection.extend({
      model: DayPart
    });
    API = {

      /**
       * @name getAppointments
       * @function
       * @returns {object} promise object
       */
      getAppointments: function() {
        var appointments, deferred;
        appointments = new Appointments();
        deferred = $.Deferred();
        App.layout.content.show(loadingView);
        appointments.url = function() {
          var query;
          query = '?startDate=' + App.filterCriteria.get('startDate') + '&sessionTypeId=' + App.filterCriteria.get('sessionTypeId') + '&trainerId=' + App.filterCriteria.get('trainerId');
          return App.APIEndpoint + 'appointments' + query;
        };
        appointments.fetch({
          success: deferred.resolve,
          error: deferred.reject
        });
        return deferred.promise();
      }
    };
    msgBus.reqres.setHandler('entities:appointments', function() {
      return API.getAppointments();
    });
  });

}).call(this);

//# sourceMappingURL=appointments.js.map
